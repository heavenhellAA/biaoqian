<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>星网锐捷标签打印</title>
    <link rel="stylesheet" href="../../Scripts_UI/layui/css/layui.css" media="all">
    <style>
        body {
        }

        .demo-carousel {
            height: 200px;
            line-height: 200px;
            text-align: center;
        }

        .onecode-text {
            text-align: left;
            border: 1px solid #000000;
            font-size: 12px;
        }

        .bot {
            border: 0px solid;
            padding: 5px 25px;
            font-size: 16px;
            margin: 5px 20px;
        }

        .font {
            font-weight: bold;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="layerDemo" style="margin-bottom: 0;">
        <div class="layui-btn-container" style="display: none;">
            <button data-method="notice" class="layui-btn">弹出标签使用方法以及更新说明</button>
        </div>
    </div>

    <!--一维码标签-->
    <div style="width: 100%; height: 430px; display: none" id="pint">
        <div id="textarea" style="width: 400px; height: 360px; margin-top: 20px; line-height: 25px; margin-left: 50px; text-align: right; display: inline-block;">
            <div style="width: 400px;" class="font">
                客户料号:
                <input id="khlh" type="text" onblur="Check();" />
            </div>
            <div class="font" style="width: 400px;">
                采购渠道:
@*                <select id=tagType" style="width: 203px;" disabled>
                    <option value="0">星网锐捷/升腾资讯</option>
                    <option value="1">锐捷网络</option>
                </select>*@
            </div>
            <div style="width: 400px;" class="font">
                厂商代码:
                <input id="csdm" type="text" onblur="Check();" />
            </div>
            <div style="width: 400px;" class="font">
                内控追踪码:
                <input id="nkzzm" type="text" onblur="Check();" />
            </div>
            <div style="width: 400px;" class="font">
                物料版本号:
                <input id="wlbbh" type="text" onblur="Check();" />
            </div>
            <div style="width: 400px;" class="font">
                数量:
                <input id="nkzzm" type="text" onblur="Check();" />
            </div>
            <div style="width: 400px;" class="font">
                Item:
                <input id="Item1" type="text" value="" style="width:110px;" placeholder="11位客户料号" />
                <input id="Item2" type="text" value="0394" style="width:40px;"
                       readonly />
                <input id="Item3" type="text" style="width:70px;" maxlength="1" minlength="1" placeholder="1位采购渠道" />
                <input id="Item6" type="text" value="" style="width:60px;" maxlength="6" minlength="6" placeholder="6位内控追踪码" onblur="tongbu(2)" />
                <input id="Item7" type="text" value="1" placeholder="物料版本号" readonly />
                <input id="Item5" type="text" value="" style="width:50px;" maxlength="4" minlength="4" placeholder="4位数量" />
            </div>
            <div style="width: 400px;" class="font">
                打印张数:
                <input type="number" id="numcount" oninput="if(value > 999 || value < 1 ){alert('打印张数范围在1到999之间！');value = ''}" />
            </div>
            <div style="width: 400px;" class="font">
                是否为遗漏补打:
                <label>
                    <input type="checkbox" name="ylbd" value="1">是
                </label>
            </div>
            <div style="width: 400px; height: 45px; text-align: right;">
                <button id="Printing" class="bot" style="border: 5px solid #ffd68c; display: inline-block; background-color: seagreen; color: white;">打印</button>
            </div>
        </div>

        <script src="../../Scripts_UI/layui/layui.all.js" charset="utf-8"></script>
        <script src="../../Scripts/jquery-2.1.1.min.js" charset="utf-8"></script>
        <script src="../../Scripts/jquery-barcode-2.0.2.min.js" charset="utf-8"></script>
        <script src="../../Scripts/barcode.js" charset="utf-8"></script>
        <script src="../../Scripts/xybself.js?version=1.1" charset="utf-8"></script>

        <script>
           
            function Check() {
                var cnbqywm = document.getElementById("khlh").value;
                $.ajax({
                    type: "GET",
                    url: '../Datainself/Getdata',
                    data: { scph: cnbqywm },
                    dataType: "json",
                    async: false,  //设置异步，必须先更改对应值才能做后续的传递参数操作
                    success: function (data) {
                        //console.log(data.Tables[0].Rows[0]);
                       
                    },
                    error: function (res) {
                        console.log(res);
                        layer.msg('查询出错或者无数据！', { icon: 0 });
                    }
                });
            }

            layui.use(['laypage', 'layer', 'table', 'carousel', 'upload', 'element'], function () {
                var laydate =
                    laypage = layui.laypage //分页
                    , layer = layui.layer //弹层
                    , table = layui.table //表格
                    , carousel = layui.carousel //轮播
                    , element = layui.element //元素操作
                    , form = layui.form //表单

                //向世界问个好
                layer.msg('欢迎使用艾华集团标签打印系统');

                //监听Tab切换
                element.on('tab(demo)', function (data) {
                    layer.tips('切换了 ' + data.index + '：' + this.innerHTML, this, {
                        tips: 1
                    });
                });
                table.on('toolbar(test)', function (obj) {
                    var checkStatus = table.checkStatus(obj.config.id);
                    switch (obj.event) {
                        case 'zfei':
                            if (checkStatus.data.length > 0) {
                                Zuofei(checkStatus);
                            } else {
                                layer.msg('请选择需要作废的打印记录', { icon: 0 });
                            }
                            break;
                        //case 'print_wai':
                        //    document.getElementById("pint_wai").setAttribute("style", "display:block;");
                        //    break;
                        case 'print_mid':
                            document.getElementById("pint").setAttribute("style", "display:block;");
                            break;
                        case 'print_bd':
                            //document.getElementById("Printing").setAttribute("style", "display:none;");
                            //document.getElementById("n_Printing").setAttribute("style", "display:none;");
                            if (checkStatus.data.length > 0 && checkStatus.data.length == 1) {
                                Bdprint(checkStatus);
                            }
                            else {
                                layer.msg('请选中需要补打的条码记录，补打功能只支持单条打印！', { icon: 0 });
                            }
                            break;
                        case 'flush':
                            renderTable();
                            break;
                        case 'readhowtouse':
                            addhowtouse(tsdiv);
                            break;

                    };
                });
        </script>
</body>
</html>